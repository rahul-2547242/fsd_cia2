<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffees</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body>

    <div class="header bg-gray-800 text-white p-4 flex flex-col items-center">
        <img src="logo.jpeg" alt="Logo" class="h-16 mb-4">
        <h1>CoffeeHub</h1>
    </div>

    <div class="nav-link bg-red-700 text-white p-2 flex justify-center">
        <div class="flex space-x-8">
            <div class="navbar-link flex items-center gap-2 py-3">
                <i class="fa-solid fa-house"></i>
                <a href="index.html">Home</a>
            </div>
            <div class="navbar-link flex items-center gap-2 py-3">
                <i class="fa-solid fa-mug-hot"></i>
                <a href="coffees.html">Coffees</a>
            </div>
            <div class="navbar-link flex items-center gap-2 py-3">
                <i class="fa-solid fa-phone"></i>
                <a href="contact.html">Contact</a>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
            <div class="w-full md:w-1/2">
                <div class="relative">
                    <input type="text" id="search-input" placeholder="Search coffees..." 
                           class="w-full p-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-700">
                    <i class="fa-solid fa-magnifying-glass absolute left-3 top-3 text-gray-400"></i>
                </div>
            </div>
            <div class="w-full md:w-1/2 flex gap-4">
                <button id="search-btn" class="bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded-lg transition">
                    Search
                </button>
                <select id="sort-select" class="p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-700">
                    <option value="">Sort by</option>
                    <option value="asc">Name (A-Z)</option>
                    <option value="desc">Name (Z-A)</option>
                </select>
            </div>
        </div>

        <h2 class="text-3xl font-bold text-center mb-8">Types of Coffees</h2>
        <div id="coffee-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </div>

    <footer class="relative z-10 bg-gray-50 bg-opacity-90 text-center">
        <div class="container p-4 text-center text-gray-600">
            <p>&copy; CoffeeHub</p>
        </div>
    </footer>

    <div class="fixed inset-0 -z-10">
        <div class="bg-[url('banner.jpeg')] bg-cover bg-center h-screen"></div>
        <div class="absolute inset-0 bg-white bg-opacity-70"></div>
    </div>

    <script>
        $(document).ready(function() {
            const apiUrl = 'https://api.sampleapis.com/coffee/hot';
            let coffees = [];
            
            function fetchCoffees() {
                $.get(apiUrl, function(data) {
                    coffees = data.slice(0, 8); 
                    displayCoffees(coffees);
                }).fail(function() {
                    $('#coffee-list').html('<p class="text-red-600 col-span-4 text-center">Failed to load coffee data. Please try again later.</p>');
                });
            }
            
            function displayCoffees(coffeeArray) {
                if (coffeeArray.length === 0) {
                    $('#coffee-list').html('<p class="text-gray-600 col-span-4 text-center">No coffees found matching your search.</p>');
                    return;
                }
                
                $('#coffee-list').empty();
                coffeeArray.forEach(coffee => {
                    const coffeeCard = `
                        <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition">
                            <img src="${coffee.image}" alt="${coffee.title}" class="w-full h-48 object-cover">
                            <div class="p-4">
                                <h3 class="text-xl font-bold mb-2">${coffee.title}</h3>
                                <p class="text-gray-600 mb-4">${coffee.description}</p>
                                <div class="mt-4">
                                    <h4 class="font-semibold text-gray-800">Ingredients:</h4>
                                    <p class="text-gray-600">${coffee.ingredients.join(', ')}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    $('#coffee-list').append(coffeeCard);
                });
            }
            
            $('#search-btn').click(function() {
                const searchTerm = $('#search-input').val().toLowerCase();
                if (!searchTerm) {
                    displayCoffees(coffees);
                    return;
                }
                
                const filtered = coffees.filter(coffee => 
                    coffee.title.toLowerCase().includes(searchTerm)
                );
                displayCoffees(filtered);
            });
            
            $('#search-input').keypress(function(e) {
                if (e.which === 13) {
                    $('#search-btn').click();
                }
            });
            
            $('#sort-select').change(function() {
                const sortValue = $(this).val();
                let sortedCoffees = [...coffees];
                
                if (sortValue === 'asc') {
                    sortedCoffees.sort((a, b) => a.title.localeCompare(b.title));
                } else if (sortValue === 'desc') {
                    sortedCoffees.sort((a, b) => b.title.localeCompare(a.title));
                }
                
                displayCoffees(sortedCoffees);
            });
            
            fetchCoffees();
        });
    </script>

</body>

</html>
